<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ad Trafficking Setup with rdfp • rdfp</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Ad Trafficking Setup with rdfp">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rdfp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/administrative-tasks.html">Administrative Tasks</a>
    </li>
    <li>
      <a href="../articles/ad-trafficking-setup.html">Ad Trafficking Setup</a>
    </li>
    <li>
      <a href="../articles/manipulating-orders-and-lineitems.html">Manipulating Orders and LineItems</a>
    </li>
    <li>
      <a href="../articles/checking-availability.html">Checking Availability</a>
    </li>
    <li>
      <a href="../articles/pulling-reports.html">Pulling Reports</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/StevenMMortimer/rdfp">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Ad Trafficking Setup with rdfp</h1>
                        <h4 class="author">Steven M. Mortimer</h4>
            
            <h4 class="date">2018-03-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/rdfp/blob/master/vignettes/ad-trafficking-setup.Rmd"><code>vignettes/ad-trafficking-setup.Rmd</code></a></small>
      <div class="hidden name"><code>ad-trafficking-setup.Rmd</code></div>

    </div>

    
    
<p>First, we load <strong>rdfp</strong> and specify the DFP network we would like to connect to. Then we authenticate by using <code><a href="../reference/dfp_auth.html">dfp_auth()</a></code>. Any existing cached token would be used or we will be prompted to authenticate via the browser.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rdfp)
<span class="kw">options</span>(<span class="dt">rdfp.network_code =</span> <span class="dv">123456789</span>)
<span class="kw"><a href="../reference/dfp_auth.html">dfp_auth</a></span>()</code></pre></div>
<div id="setup-custom-labels-for-items" class="section level4">
<h4 class="hasAnchor">
<a href="#setup-custom-labels-for-items" class="anchor"></a>Setup Custom Labels for Items</h4>
<p>Custom labels are helpful for “tagging” DFP items with metadata that can later be used frequency capping, doing competitive exclusion or other specific actions. See the following link for Google’s explanation on their uses: (<a href="https://support.google.com/dfp%5C_premium/answer/190565?hl=en&amp;ref_topic=30224" class="uri">https://support.google.com/dfp\_premium/answer/190565?hl=en&amp;ref_topic=30224</a>)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this creates a label called "Auto - Competitive Exclusion" that we can add</span>
<span class="co"># to any line item or order that we might want to use to prevent from clashing </span>
<span class="co"># where two different car advertisers ads should not be shown at once.</span>
request_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name=</span><span class="st">"Auto - Competitive Exclusion"</span>,
                           <span class="dt">description=</span><span class="kw">paste0</span>(<span class="st">"A label to prevent two different car "</span>,
                                              <span class="st">"companies from showing ads together"</span>),
                           <span class="dt">types=</span><span class="st">'COMPETITIVE_EXCLUSION'</span>)
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">'labels'</span>=hypothetical_label)
result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfp_createLabels.html">dfp_createLabels</a></span>(request_data)</code></pre></div>
</div>
<div id="setup-custom-fields-for-items" class="section level4">
<h4 class="hasAnchor">
<a href="#setup-custom-fields-for-items" class="anchor"></a>Setup Custom Fields for Items</h4>
<p>Custom fields are helpful for “tagging” DFP items with metadata that can later be used filtering or reporting. See the following link for Google’s explanation on their uses: (<a href="https://support.google.com/dfp%5C_premium/answer/2694303?hl=en" class="uri">https://support.google.com/dfp\_premium/answer/2694303?hl=en</a>)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this creates an extra field on the CREATIVE entity type that denotes the time of </span>
<span class="co"># day that the creative typically runs. First we create the field, then populate</span>
<span class="co"># with potential options since it is a dropdown field.</span>
request_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name=</span><span class="st">'Timing'</span>,
                           <span class="dt">description=</span><span class="st">'The time of day that this creative usually runs.'</span>, 
                           <span class="dt">entityType=</span><span class="st">'CREATIVE'</span>,
                           <span class="dt">dataType=</span><span class="st">'DROP_DOWN'</span>,
                           <span class="dt">visibility=</span><span class="st">'FULL'</span>)
dfp_createCustomFields_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfp_createCustomFields.html">dfp_createCustomFields</a></span>(request_data)

request_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">customFieldId=</span><span class="kw">rep</span>(dfp_createCustomFields_result<span class="op">$</span>id, <span class="dv">3</span>),
                           <span class="dt">displayName=</span><span class="kw">c</span>(<span class="st">'Morning'</span>, <span class="st">'Afternoon'</span>, <span class="st">'Evening'</span>))
dfp_createCustomFieldOptions_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfp_createCustomFieldOptions.html">dfp_createCustomFieldOptions</a></span>(request_data)</code></pre></div>
</div>
<div id="setup-custom-targeting-keys-and-values" class="section level4">
<h4 class="hasAnchor">
<a href="#setup-custom-targeting-keys-and-values" class="anchor"></a>Setup Custom Targeting Keys and Values</h4>
<p>DFP allows traffickers to create custom tags to better target line items on their site. For example, a certain section of the site or search term used by a visitor can be encoded as custom targeting keys and values that can later be used when creating orders and line items, and evaluating potential inventory. See the following link for Google’s explanation on their uses: (<a href="https://support.google.com/dfp%5C_premium/answer/188092?hl=en" class="uri">https://support.google.com/dfp\_premium/answer/188092?hl=en</a>)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create the key</span>
unique_numb &lt;-<span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">runif</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">100000</span>))
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">keys=</span><span class="kw">list</span>(<span class="dt">name=</span><span class="kw">paste0</span>(<span class="st">'Test'</span>, unique_numb), 
                               <span class="dt">displayName=</span><span class="kw">paste0</span>(<span class="st">'TestKey'</span>, unique_numb), 
                               <span class="dt">type=</span><span class="st">'FREEFORM'</span>))
dfp_createCustomTargetingKeys_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfp_createCustomTargetingKeys.html">dfp_createCustomTargetingKeys</a></span>(request_data)
dfp_createCustomTargetingKeys_result
<span class="co">#&gt; # A tibble: 1 x 5</span>
<span class="co">#&gt;         id name      displayName  type     status</span>
<span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt; </span>
<span class="co">#&gt; 1 11840119 Test37171 TestKey37171 FREEFORM ACTIVE</span>

<span class="co"># create the values</span>
request_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">customTargetingKeyId=</span><span class="kw">rep</span>(dfp_createCustomTargetingKeys_result<span class="op">$</span>id,<span class="dv">2</span>),
                           <span class="dt">name=</span><span class="kw">c</span>(<span class="st">'TestValue1'</span>,<span class="st">'TestValue2'</span>), 
                           <span class="dt">displayName=</span><span class="kw">c</span>(<span class="st">'TestValue1'</span>,<span class="st">'TestValue2'</span>), 
                           <span class="dt">matchType=</span><span class="kw">rep</span>(<span class="st">'EXACT'</span>, <span class="dv">2</span>))
dfp_createCustomTargetingValues_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfp_createCustomTargetingValues.html">dfp_createCustomTargetingValues</a></span>(request_data)
dfp_createCustomTargetingValues_result
<span class="co">#&gt; # A tibble: 2 x 6</span>
<span class="co">#&gt;   customTargetingKeyId           id name       displayName matchType status</span>
<span class="co">#&gt;                  &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt; </span>
<span class="co">#&gt; 1             11840119 448054975817 TestValue1 TestValue1  EXACT     ACTIVE</span>
<span class="co">#&gt; 2             11840119 448054449694 TestValue2 TestValue2  EXACT     ACTIVE</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '8ecf941477ebecebe34b5825a4ae705e',
    indexName: 'rdfp',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
