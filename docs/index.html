<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Implementation of the 'DoubleClick for Publishers' API • rdfp</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="An Implementation of the 'DoubleClick for Publishers' API">
<meta property="og:description" content="An implementation of Google's 'DoubleClick for Publishers' (DFP) API 
    &lt;https://developers.google.com/doubleclick-publishers/docs/start&gt;. 
    This package is automatically compiled from the API WSDLs (Web Service Description 
    Language) files to dictate how the API is structured. Theoretically, all API 
    actions are possible using this package; however, care must be taken to format 
    the inputs correctly and parse the outputs correctly as well. Please see Google's 
    DFP API reference and this package's website &lt;https://stevenmmortimer.github.io/rdfp/&gt; 
    for more information, documentation, and examples.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rdfp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/administrative-tasks.html">Administrative Tasks</a>
    </li>
    <li>
      <a href="articles/ad-trafficking-setup.html">Ad Trafficking Setup</a>
    </li>
    <li>
      <a href="articles/manipulating-orders-and-lineitems.html">Manipulating Orders and LineItems</a>
    </li>
    <li>
      <a href="articles/checking-availability.html">Checking Availability</a>
    </li>
    <li>
      <a href="articles/pulling-reports.html">Pulling Reports</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/StevenMMortimer/rdfp">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    

<p><br><img src="reference/figures/rdfp.png" width="120px" align="right"></p>
<p><strong>Compiled using DFP API version: <code>v201811</code></strong></p>
<p><strong>rdfp</strong> allows you to use the DoubleClick for Publishers API from R (recently renamed to Google Ad Manager). Manage inventory, create orders, pull reports, and more!</p>
<div id="table-of-contents" class="section level2">
<h2 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of Contents</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#vignettes">Vignettes</a></li>
<li>
<a href="#usage">Usage</a>
<ul>
<li><a href="#load-package-and-set-api-version">Set API Version</a></li>
<li><a href="#authenticate">Authenticate</a></li>
<li><a href="#get-current-user-info">Get Current User Info</a></li>
<li><a href="#pull-a-lineitem">Pull a LineItem</a></li>
<li><a href="#run-a-report">Run a Report</a></li>
</ul>
</li>
<li><a href="#credits">Credits</a></li>
<li><a href="#more-information">More Information</a></li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install from CRAN</span>
<span class="kw">install.packages</span>(<span class="st">"rdfp"</span>)

<span class="co"># or get the latest version available on GitHub using the devtools package</span>
<span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"StevenMMortimer/rdfp"</span>)</code></pre></div>
<p>If you encounter a clear bug, please file a minimal reproducible example on <a href="https://github.com/StevenMMortimer/rdfp/issues">GitHub</a>.</p>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>The README below outlines the package functionality, but review the vignettes for more detailed examples on usage.</p>
<ul>
<li><a href="articles/administrative-tasks.html">Administrative Tasks</a></li>
<li><a href="articles/ad-trafficking-setup.html">Ad Trafficking Setup</a></li>
<li><a href="articles/manipulating-orders-and-lineitems.html">Manipulating Orders and LineItems</a></li>
<li><a href="articles/checking-availability.html">Checking Availability</a></li>
<li><a href="articles/pulling-reports.html">Pulling Reports</a></li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>All functions start with <code>dfp_</code> so that you can easily identify DFP-specific operations and use tab completion in RStudio. Most <strong>rdfp</strong> functions will return a <code>tbl_df</code> or <code>list</code> parsed from the XML returned in the SOAP response.</p>
<div id="load-package-and-set-api-version" class="section level3">
<h3 class="hasAnchor">
<a href="#load-package-and-set-api-version" class="anchor"></a>Load Package and Set API Version</h3>
<p>Google releases 4 versions of the DFP API each year and deprecates versions older than one year, so there is a lot that’s regularly changing in this package. <strong>rdfp</strong> is periodically compiled against a recent version of the API. If you would like to use an older or newer API version that what is the package default, then just specify it as an option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rdfp)
<span class="co"># see the package default version</span>
<span class="kw">getOption</span>(<span class="st">"rdfp.version"</span>)
<span class="co">#&gt; [1] "v201811"</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this will force all calls to be against the version "v201808"</span>
<span class="kw">options</span>(<span class="dt">rdfp.version =</span> <span class="st">"v201808"</span>)</code></pre></div>
</div>
<div id="authenticate" class="section level3">
<h3 class="hasAnchor">
<a href="#authenticate" class="anchor"></a>Authenticate</h3>
<p>To authenticate you will first need to specify the <code>network_code</code> of the DFP instance you would like to connect to. This is the only required option that the user must specify when using the <strong>rdfp</strong> package. After setting the <code>network_code</code> all you need to do is run <code><a href="reference/dfp_auth.html">dfp_auth()</a></code>. If you already have a cached <code>.httr-oauth-rdfp</code> file in the current working directory, then the token will be loaded and refreshed if necessary. Otherwise, your browswer will pop open and you will interactively authenticate.</p>
<p>The package has other options like a client_id and client_secret where you can connect using your own Google Client instead of the package default. Using your own client requires you to first set one up in the <a href="https://console.developers.google.com">Google Developers Console</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">rdfp.network_code =</span> <span class="st">"12345678"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.application_name =</span> <span class="st">"MyApp"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.client_id =</span> <span class="st">"012345678901-99thisisatest99.apps.googleusercontent.com"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.client_secret =</span> <span class="st">"Th1s1sMyC1ientS3cr3t"</span>)

<span class="co"># dfp_auth will use the options above and cache an OAuth token in the working directory</span>
<span class="co"># the token will be refreshed when necessary</span>
<span class="kw"><a href="reference/dfp_auth.html">dfp_auth</a></span>()</code></pre></div>
</div>
<div id="get-current-user-info" class="section level3">
<h3 class="hasAnchor">
<a href="#get-current-user-info" class="anchor"></a>Get Current User Info</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check current user or network</span>
user_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getCurrentUser.html">dfp_getCurrentUser</a></span>()
user_info[,<span class="kw">c</span>(<span class="st">'id'</span>, <span class="st">'isActive'</span>)]
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;          id isActive</span>
<span class="co">#&gt;       &lt;dbl&gt; &lt;lgl&gt;   </span>
<span class="co">#&gt; 1 185549536 TRUE</span>
network_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getCurrentNetwork.html">dfp_getCurrentNetwork</a></span>()
network_info[,<span class="kw">c</span>(<span class="st">'id'</span>, <span class="st">'networkCode'</span>)]
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;       id networkCode</span>
<span class="co">#&gt;    &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 109096     1019096</span></code></pre></div>
<div id="pull-a-lineitem" class="section level4">
<h4 class="hasAnchor">
<a href="#pull-a-lineitem" class="anchor"></a>Pull a LineItem</h4>
<p>The function <code><a href="reference/dfp_getLineItemsByStatement.html">dfp_getLineItemsByStatement()</a></code> function from the <a href="https://developers.google.com/doubleclick-publishers/docs/reference/v201802/LineItemService">LineItemService</a> allows you to retrieve Line Items by Publishers Query Language (PQL) statement. The statement is constructed as a list of lists that are nested to emulate the hierarchy of the XML that needs to be created in the request.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve up to 3 Line Items that have a status of "DELIVERING"</span>
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">'filterStatement'</span>=<span class="kw">list</span>(<span class="st">'query'</span>=<span class="st">"WHERE status='DELIVERING' LIMIT 3"</span>))
resultset &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getLineItemsByStatement.html">dfp_getLineItemsByStatement</a></span>(request_data, <span class="dt">as_df=</span><span class="ot">TRUE</span>) 
resultset[,<span class="kw">c</span>(<span class="st">'orderId'</span>, <span class="st">'id'</span>, <span class="st">'priority'</span>, <span class="st">'deliveryRateType'</span>)]
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;      orderId         id priority deliveryRateType</span>
<span class="co">#&gt;        &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">#&gt; 1 2231707164 4557799162       12 EVENLY          </span>
<span class="co">#&gt; 2 2231707164 4557800341       12 EVENLY          </span>
<span class="co">#&gt; 3 2231707164 4557803758       12 EVENLY</span></code></pre></div>
</div>
</div>
<div id="run-a-report" class="section level3">
<h3 class="hasAnchor">
<a href="#run-a-report" class="anchor"></a>Run a Report</h3>
<p>Below is an example of how to make a simple report request.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># In order to run a report you must specify how the report should be structured </span>
<span class="co"># by specifying a reportQuery inside a reportJob. All of the dimensions, columns, </span>
<span class="co"># date range options, etc. are documented at:</span>
<span class="co"># https://developers.google.com/doubleclick-publishers/docs/reference/v201802/ReportService.ReportQuery</span>
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">reportJob=</span><span class="kw">list</span>(<span class="dt">reportQuery=</span><span class="kw">list</span>(<span class="dt">dimensions=</span><span class="st">'MONTH_AND_YEAR'</span>, 
                                                     <span class="dt">dimensions=</span><span class="st">'AD_UNIT_ID'</span>,
                                                     <span class="dt">adUnitView=</span><span class="st">'FLAT'</span>,
                                                     <span class="dt">columns =</span> <span class="st">'AD_SERVER_IMPRESSIONS'</span>, 
                                                     <span class="dt">columns =</span> <span class="st">'AD_SERVER_CLICKS'</span>,
                                                     <span class="dt">dateRangeType=</span><span class="st">'LAST_WEEK'</span>
                                                     )))

<span class="co"># a convenience function has been provided to you to manage the report process workflow</span>
<span class="co"># if you would like more control, see the example below which moves through each step in the process</span>
report_data &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_full_report_wrapper.html">dfp_full_report_wrapper</a></span>(request_data)
report_data[,<span class="kw">c</span>(<span class="st">'Dimension.MONTH_AND_YEAR'</span>, <span class="st">'Dimension.AD_UNIT_ID'</span>, <span class="st">'Column.AD_SERVER_CLICKS'</span>)]
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;   Dimension.MONTH_AND_YEAR Dimension.AD_UNIT_ID Column.AD_SERVER_CLICKS</span>
<span class="co">#&gt;   &lt;chr&gt;                                   &lt;dbl&gt;                   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2018-12                           21677451947                     864</span>
<span class="co">#&gt; 2 2018-12                           21677451950                     210</span>
<span class="co">#&gt; 3 2018-12                           21677553898                    5049</span>
<span class="co">#&gt; 4 2018-12                           21677553901                     174</span>
<span class="co">#&gt; 5 2018-12                           21677553904                    3474</span>
<span class="co">#&gt; 6 2018-12                           21677451953                    1687</span>
<span class="co">#&gt; 7 2018-12                           21677553910                      65</span>
<span class="co">#&gt; 8 2018-12                           21677553913                    2589</span>
<span class="co">#&gt; 9 2018-12                           21677554012                      75</span></code></pre></div>
</div>
</div>
<div id="credits" class="section level2">
<h2 class="hasAnchor">
<a href="#credits" class="anchor"></a>Credits</h2>
<p>This application uses other open source software components. The authentication components are mostly verbatim copies of the routines established in the <strong>googlesheets</strong> package (<a href="https://github.com/jennybc/googlesheets" class="uri">https://github.com/jennybc/googlesheets</a>). We acknowledge and are grateful to these developers for their contributions to open source.</p>
</div>
<div id="more-information" class="section level2">
<h2 class="hasAnchor">
<a href="#more-information" class="anchor"></a>More Information</h2>
<p>Google provides support for client libraries <a href="https://developers.google.com/doubleclick-publishers/docs/clients">here</a>, but unfortunately, R is not a supported language. Google’s client libraries directly reference the production WSDLs to interact with the API, but this package makes SOAP requests best formatted to match the WSDL standards. This articulation is not perfect and continued progress will be made to bring functionality up to par with the client libraries.</p>
<p>Most all operations supported by the DFP API are available via this package. It is strongly recommended that you use the <a href="https://developers.google.com/doubleclick-publishers/docs/rel_notes">DFP API Reference</a> when using this package. Details on formatting, attributes, and methods are all better explained by Google’s documentation.</p>
<p><a href="#">Top</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rdfp">https://​cloud.r-project.org/​package=rdfp</a>
</li>
<li>Browse source code at <br><a href="https://github.com/StevenMMortimer/rdfp">https://​github.com/​StevenMMortimer/​rdfp</a>
</li>
<li>Report a bug at <br><a href="https://github.com/StevenMMortimer/rdfp/issues">https://​github.com/​StevenMMortimer/​rdfp/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Steven M. Mortimer <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/StevenMMortimer/rdfp"><img src="https://travis-ci.org/StevenMMortimer/rdfp.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/StevenMMortimer/rdfp"><img src="https://ci.appveyor.com/api/projects/status/github/StevenMMortimer/rdfp?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="http://cran.r-project.org/package=rdfp"><img src="http://www.r-pkg.org/badges/version/rdfp" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://codecov.io/gh/StevenMMortimer/rdfp?branch=master"><img src="https://codecov.io/gh/StevenMMortimer/rdfp/branch/master/graph/badge.svg" alt="Coverage Status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '8ecf941477ebecebe34b5825a4ae705e',
    indexName: 'rdfp',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
